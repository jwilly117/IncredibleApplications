<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel Version 2</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    
    <!-- Jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase.js"></script>

    <link rel="stylesheet" href="admin.css">

    
    
</head>
<body>
    
    <!-- Container -->
    <div class="container">
        <nav class="navbar navbar-dark bg-dark">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">
                <img src="images/logo2.jpg" alt="" width="35" height="34" id="logo" class="d-inline-block align-text-top">
                Incredible - Applicants <a href="admin.html" id="right">Version1</a>
              </a>
            </div>
          </nav>


        <div>
            <h1>Current Applications</h1>

            <hr>

            
            <!-- Version 2  -->
            <!-- This version will align applicants in cards instead of line items on a table
            which should make it easier to manipulate, since all cells arent tied together -->
            <div class="row">
                <div class="col-md-3">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Modi odio rerum dolore esse dolores repellendus mollitia magni suscipit id aliquid saepe vel fugiat fugit voluptatum, totam sapiente excepturi tempora perferendis!
                </div>
                <div class="col-md-3">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Modi odio rerum dolore esse dolores repellendus mollitia magni suscipit id aliquid saepe vel fugiat fugit voluptatum, totam sapiente excepturi tempora perferendis!
                </div>
                <div class="col-md-3">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Modi odio rerum dolore esse dolores repellendus mollitia magni suscipit id aliquid saepe vel fugiat fugit voluptatum, totam sapiente excepturi tempora perferendis!
                </div>
                <div class="col-md-3">
                    Lorem ipsum dolor sit amet consectetur, adipisicing elit. Modi odio rerum dolore esse dolores repellendus mollitia magni suscipit id aliquid saepe vel fugiat fugit voluptatum, totam sapiente excepturi tempora perferendis!
                </div>
            </div>
            <hr>

            <div class="row">
                <div class="col-md-4">
                    <div class="card" style="width: 22.2rem;">
                        <!-- <img src="images/placeholderPortrait2.png" class="card-img-top" alt="..."> -->
                        <div class="card-body">
                            <img src="images/placeholderPortrait2.png" style="float: left; margin-right: 10px;"  alt="">
                          <h5 class="card-title">Corin Griffin || <span id="role">Office</span></h5>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                          <a href="#" style="background-color: rgb(76, 175, 175);" class="btn btn-primary">View</a>
                          <img src="images/checks/greenphonecheck.png" id="statusIcon" alt="">
                          <img src="images/checks/checkapp.png" id="statusIcon" alt="">
                          <img src="images/checks/w9check.png" id="statusIcon" alt="">
                          <img src="images/checks/dlcheck.png" id="statusIcon" alt="">
                          <img src="images/checks/epacheck.png" id="statusIcon" alt="">



                        </div>
                      </div>
                </div>

                <div class="col-md-4">
                    <div class="card" style="width: 22.2rem;">
                        <!-- <img src="images/placeholderPortrait2.png" class="card-img-top" alt="..."> -->
                        <div class="card-body">
                            <img src="images/placeholderPortrait2.png" style="float: left; margin-right: 10px;"  alt="">
                          <h5 class="card-title">Jake Williams || <span id="role">Office</span></h5>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                          <a href="#" style="background-color: rgb(76, 175, 175);" class="btn btn-primary">View</a>
                          <img src="images/checks/greenphonecheck.png" id="statusIcon" alt="">
                          <img src="images/checks/checkapp.png" id="statusIcon" alt="">
                          <img src="images/checks/w9checkyellow.png" id="statusIcon" alt="">
                          <img src="images/checks/dlcheck.png" id="statusIcon" alt="">
                          <img src="images/checks/greenepacheck.png" id="statusIcon" alt="">
                        </div>
                      </div>
                </div>

                <div class="col-md-4">
                    <div class="card" style="width: 22.2rem;">
                        <!-- <img src="images/placeholderPortrait2.png" class="card-img-top" alt="..."> -->
                        <div class="card-body">
                            <img src="images/placeholderPortrait2.png" style="float: left; margin-right: 10px;"  alt="">
                          <h5 class="card-title">Kayla Hester || <span id="role">Office</span></h5>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                          <a href="#" style="background-color: rgb(76, 175, 175);" class="btn btn-primary">View</a>
                          <img src="images/checks/greenphonecheck.png" id="statusIcon" alt="">
                          <img src="images/checks/checkapp.png" id="statusIcon" alt="">
                          <img src="images/checks/w9check.png" id="statusIcon" alt="">
                          <img src="images/checks/dlcheck.png" id="statusIcon" alt="">
                          <img src="images/checks/greenepacheck.png" id="statusIcon" alt="">
                        </div>
                      </div>
                </div>

                <div class="col-md-4">
                    <div class="card" style="width: 22.3rem;">
                        <!-- <img src="images/placeholderPortrait2.png" class="card-img-top" alt="..."> -->
                        <div class="card-body">
                            <img src="images/placeholderPortrait2.png" style="float: left; margin-right: 10px;"  alt="">
                          <h5 class="card-title">James Hibbet || <span id="role">Office</span></h5>
                          <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                          <a href="#" style="background-color: rgb(76, 175, 175);" class="btn btn-primary">View</a>
                          <img src="images/checks/greenphonecheck.png" id="statusIcon" alt="">
                          <img src="images/checks/checkapp.png" id="statusIcon" alt="">
                          <img src="images/checks/w9check.png" id="statusIcon" alt="">
                          <img src="images/checks/dlcheck.png" id="statusIcon" alt="">
                          <img src="images/checks/epacheck.png" id="statusIcon" alt="">
                        </div>
                      </div>
                </div>
            </div>



        </div>
    </div>
    

    <script>

      // Below will be the code to pull from firebase when a new child is added
      // Your web app's Firebase configuration
            var firebaseConfig = {
                apiKey: "AIzaSyDlcbijm1mEcCm4lL2Sl2Wu8VL00NjWhdA",
                authDomain: "incredible-applications.firebaseapp.com",
                projectId: "incredible-applications",
                storageBucket: "incredible-applications.appspot.com",
                messagingSenderId: "811804729674",
                appId: "1:811804729674:web:7ded90ff95e34888ed21b3"
                };
                  
               // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
        
            var database = firebase.database();

            database.ref("/applicants").on("child_added", function(snap){
              console.log(snap.val());
              // $("#applicantsPanel").append("hello");

              // Store all remote values in local variables
              let snapFirstName = snap.val().firstName;
              let snapLastName = snap.val().lastName;
              let snapAddress = snap.val().address;
              let snapCity = snap.val().city;
              let snapZip = snap.val().zip;
              let snapEmail = snap.val().email;
              let snapPhone = snap.val().phone;
              let snapCalledApplicant;
              if (snap.val().calledApplicant == true){
                snapCalledApplicant = "Yes"
              } 
              else {
                snapCalledApplicant = "No"
              }
              let snapDocuments = "Waiting";
              




              

              $("#applicantsPanel").append(`
                <tr id="green">
                  <td>${snapFirstName}</td>
                  <td>${snapLastName}</td>
                  
                  <td>${snapAddress}</td>
                  <td>${snapCity}</td>
                  <td>${snapZip}</td>
                  <td>${snapPhone}</td>
                  <td>${snapEmail}</td>
                  
                  <td>${snapCalledApplicant}</td>
                  <td>${snapDocuments}</td>
                  <td>${snapDocuments}</td>
                  <td>${snapDocuments}</td>
                  <td>${snapDocuments}</td>
                  <td>${snapDocuments}</td>
                  <td>${snapDocuments}</td>

                </tr>
              `)
              console.log(snapLastName + " " +  snapFirstName)
              
            })

            
            


    </script>

<script>
    const cards = document.querySelectorAll('.card');

    // this is the old and much hackier solution
// 		const toggleExpansion = (element, to, duration = 350) => {
// 		  return new Promise((res) => {
// 		    requestAnimationFrame(() => {
// 		      element.style.transition = `
// 			width ${duration}ms ease-in-out,
// 			height ${duration}ms ease-in-out,
// 			left ${duration}ms ease-in-out,
// 			top ${duration}ms ease-in-out
// 		      `;
// 		      requestAnimationFrame(() => {
// 			element.style.top = to.top;
// 			element.style.left = to.left;
// 			element.style.width = to.width;
// 			element.style.height = to.height;
// 		      })
// 		    });
// 		    setTimeout(res, duration);
// 		  })
// 		}
    
    const toggleExpansion = (element, to, duration = 350) => {
      return new Promise((res) => {
        element.animate([
          {
        top: to.top,
        left: to.left,
        width: to.width,
        height: to.height
          }
        ], {duration, fill: 'forwards', ease: 'ease-in'})
        setTimeout(res, duration);
      })
    }

    const fadeContent = (element, opacity, duration = 300) => {
        return new Promise(res => {
            [...element.children].forEach((child) => {
                requestAnimationFrame(() => {
                    child.style.transition = `opacity ${duration}ms linear`;
                    child.style.opacity = opacity;
                });
            })
            setTimeout(res, duration);
        })
    }

    const getCardContent = (title, type) => {
        return `
            <div class="card-content">
                <h2>${title}</h2>
                <img src="./assets/${type}.png" alt="${title}">
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor eum ipsa molestiae nesciunt nostrum porro
                    reprehenderit? Animi corporis deleniti dolore laborum, nemo pariatur temporibus voluptatem.
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque eligendi fuga ullam? Aperiam blanditiis
                    cupiditate dicta eius exercitationem explicabo fugit, impedit iure libero nam nihil nisi perferendis
                    provident quaerat repellendus vitae voluptate? Aliquid amet architecto asperiores aut consequuntur
                    corporis debitis ea eveniet in maiores, nam placeat quae, ratione rerum ullam?
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor eum ipsa molestiae nesciunt nostrum porro
                    reprehenderit? Animi corporis deleniti dolore laborum, nemo pariatur temporibus voluptatem.
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Dolor eum ipsa molestiae nesciunt nostrum porro
                    reprehenderit? Animi corporis deleniti dolore laborum, nemo pariatur temporibus voluptatem.
                </p>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque eligendi fuga ullam? Aperiam blanditiis
                    cupiditate dicta eius exercitationem explicabo fugit, impedit iure libero nam nihil nisi perferendis
                    provident quaerat repellendus vitae voluptate? Aliquid amet architecto asperiores aut consequuntur
                    corporis debitis ea eveniet in maiores, nam placeat quae, ratione rerum ullam?
                </p>
            </div>
        `;
    }

    const onCardClick = async (e) => {
        const card = e.currentTarget;
        // clone the card
        const cardClone = card.cloneNode(true);
        // get the location of the card in the view
        const {top, left, width, height} = card.getBoundingClientRect();
        // position the clone on top of the original
        cardClone.style.position = 'fixed';
        cardClone.style.top = top + 'px';
        cardClone.style.left = left + 'px';
        cardClone.style.width = width + 'px';
        cardClone.style.height = height + 'px';
        // hide the original card with opacity
        card.style.opacity = '0';
        // add card to the same container
        card.parentNode.appendChild(cardClone);
        // create a close button to handle the undo
        const closeButton = document.createElement('button');
        // position the close button top corner
        closeButton.style = `
            position: fixed;
            z-index: 10000;
            top: 35px;
            right: 35px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background-color: #e25656;
        `;
        // attach click event to the close button
        closeButton.addEventListener('click', async () => {
            // remove the button on close
            closeButton.remove();
            // remove the display style so the original content is displayed right
            cardClone.style.removeProperty('display');
            cardClone.style.removeProperty('padding');
            // show original card content
            [...cardClone.children].forEach(child => child.style.removeProperty('display'));
            fadeContent(cardClone, '0');
            // shrink the card back to the original position and size
            await toggleExpansion(cardClone, {top: `${top}px`, left: `${left}px`, width: `${width}px`, height: `${height}px`}, 300)
            // show the original card again
            card.style.removeProperty('opacity');
            // remove the clone card
            cardClone.remove();
        });
        // fade the content away
        fadeContent(cardClone, '0')
            .then(() => {
                [...cardClone.children].forEach(child => child.style.display = 'none');
            });
        // expand the clone card
        await toggleExpansion(cardClone, {top: 0, left: 0, width: '100vw', height: '100vh'});
        const content = getCardContent(card.textContent, card.dataset.type)
        // set the display block so the content will follow the normal flow in case the original card is not display block
        cardClone.style.display = 'block';
        cardClone.style.padding = '0';
        // append the close button after the expansion is done
        cardClone.appendChild(closeButton);
        cardClone.insertAdjacentHTML('afterbegin', content);
    };

    cards.forEach(card => card.addEventListener('click', onCardClick));
</script>

    <script src="admin.js"></script>
</body>
</html>